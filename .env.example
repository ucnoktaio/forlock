# Forlock Production Environment Configuration
# =============================================
#
# Quick Setup:
#   ./scripts/generate-secrets.sh
#
# Manual Setup:
#   1. Copy: cp .env.example .env
#   2. Generate secrets with openssl
#   3. Update domain configuration
#
# NEVER commit .env to version control!

# ==========================================
# Docker Registry Settings
# ==========================================
DOCKER_REGISTRY=docker.io
DOCKER_IMAGE_PREFIX=ucnokta
IMAGE_TAG=latest

# ==========================================
# Domain Configuration (CHANGE FOR PRODUCTION!)
# ==========================================
# Replace with your actual domain
DOMAIN=vault.yourcompany.com
CORS_ALLOWED_ORIGINS=https://vault.yourcompany.com
FIDO2_DOMAIN=vault.yourcompany.com
FIDO2_SERVER_NAME=Forlock
FIDO2_ORIGIN=https://vault.yourcompany.com

# ==========================================
# Database Configuration
# ==========================================
POSTGRES_DB=forlock
POSTGRES_USER=forlock
# Generate: openssl rand -base64 24 | tr -d '/+='
POSTGRES_PASSWORD=<CHANGE_ME>

# ==========================================
# Redis Configuration
# ==========================================
# Generate: openssl rand -base64 24 | tr -d '/+='
REDIS_PASSWORD=<CHANGE_ME>

# ==========================================
# RabbitMQ Configuration
# ==========================================
RABBITMQ_USER=forlock
# Generate: openssl rand -base64 24 | tr -d '/+='
RABBITMQ_PASSWORD=<CHANGE_ME>

# ==========================================
# JWT Authentication
# ==========================================
# Generate: openssl rand -base64 48
JWT_SECRET_KEY=<CHANGE_ME_MIN_64_CHARS>
JWT_ISSUER=forlock-api
JWT_AUDIENCE=forlock-clients
JWT_EXPIRATION_MINUTES=480

# ==========================================
# Encryption Keys (CRITICAL!)
# ==========================================
# These keys encrypt ALL vault data.
# BACKUP SECURELY! Loss = Data Loss!
#
# Generate: openssl rand -base64 32
VAULT_MASTER_KEY=<CHANGE_ME>
SYSTEM_MASTER_KEY=<CHANGE_ME>

# ==========================================
# Logging
# ==========================================
# Levels: Verbose, Debug, Information, Warning, Error, Fatal
LOG_LEVEL=Information

# ==========================================
# Graylog Integration (Optional)
# ==========================================
# Set these to enable centralized logging
GRAYLOG__HOSTNAMEORADDRESS=
GRAYLOG__PORT=12201

# ==========================================
# HashiCorp Vault Integration (Optional)
# ==========================================
# Enable for external secrets management
# See: docs/guides/VAULT_INTEGRATION.md
VAULT__ENABLED=false
VAULT__ADDRESS=http://vault:8200
VAULT__AUTH_METHOD=approle
VAULT__ROLE_ID=
VAULT__SECRET_ID=
VAULT__MOUNT_PATH=forlock

# ==========================================
# Resource Limits
# ==========================================
# Choose configuration based on user count
# See docs/SINGLE_NODE.md for detailed sizing guide

# --- Default (< 500 Users) ---
API_MEMORY_LIMIT=1G
API_CPU_LIMIT=1.0
POSTGRES_MEMORY_LIMIT=512M
POSTGRES_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=256M
REDIS_CPU_LIMIT=0.5
RABBITMQ_MEMORY_LIMIT=256M
RABBITMQ_CPU_LIMIT=0.5

# --- 5,000 Users ---
# Uncomment below and comment out Default section
# API_MEMORY_LIMIT=4G
# API_CPU_LIMIT=2.0
# POSTGRES_MEMORY_LIMIT=16G
# POSTGRES_CPU_LIMIT=4.0
# REDIS_MEMORY_LIMIT=4G
# REDIS_CPU_LIMIT=2.0
# RABBITMQ_MEMORY_LIMIT=2G
# RABBITMQ_CPU_LIMIT=2.0

# --- 10,000 Users ---
# Use Docker Swarm for 10K+ users
# See docs/SWARM.md for cluster configuration
# API_MEMORY_LIMIT=8G
# API_CPU_LIMIT=4.0
# POSTGRES_MEMORY_LIMIT=32G
# POSTGRES_CPU_LIMIT=8.0
# REDIS_MEMORY_LIMIT=8G
# REDIS_CPU_LIMIT=4.0
# RABBITMQ_MEMORY_LIMIT=4G
# RABBITMQ_CPU_LIMIT=2.0
